<!DOCTYPE html>
<html>
<head>
    <title>How It Works - Chaos-Based Cryptography</title>
    <script src="https://cdn.plot.ly/plotly-2.24.1.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Sora:wght@300;400;500;600;700&display=swap');
        body {
            font-family: 'Sora', sans-serif;
            background: linear-gradient(135deg, #0f0f1a, #1a1a2e);
            color: #eee;
        }
        .container {
            background: rgba(51, 51, 51, 0.8);
            backdrop-filter: blur(10px);
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(255,0,0,0.1);
            margin-bottom: 20px;
            border: 1px solid #555;
        }
        h1, h2, h3 { color: #ff4d4d; }
        .button {
            display: inline-block;
            background-color: #7f8c8d;
            color: white;
            padding: 15px 30px;
            margin: 10px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            text-decoration: none;
            font-size: 16px;
        }
        .button:hover {
            background-color: #95a5a6;
        }
        .explanation {
            text-align: left;
            padding: 20px;
        }
        .graph {
            margin: 20px 0;
            padding: 10px;
            border: 1px solid #555;
            border-radius: 4px;
        }
        .code-block {
            background-color: #444;
            padding: 15px;
            border-radius: 4px;
            font-family: monospace;
            margin: 10px 0;
            color: #eee;
        }
        .controls {
            display: flex;
            gap: 20px;
            margin: 20px 0;
            padding: 15px;
            background: rgba(0,0,0,0.2);
            border-radius: 8px;
        }
        .controls label {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .controls input[type="range"] {
            width: 150px;
        }
    </style>
</head>
<body>
    <div class="container explanation">
        <h2>How Does It Work?</h2>

        <h3>1. The Logistic Map</h3>
        <p>At the heart of our encryption system is the logistic map, a chaotic mathematical function:</p>
        <div class="code-block">x_{n+1} = r * x_n * (1 - x_n)</div>
        <p>Where:</p>
        <ul>
            <li>r â‰ˆ 4 (we use 3.99999)</li>
            <li>x_n is a value between 0 and 1</li>
        </ul>
        <div id="logisticPlot" class="graph"></div>

        <h3>2. Encryption Process</h3>
        <p>The encryption process follows these steps:</p>
        <ol>
            <li>Each character in the input message is converted to its ASCII value</li>
            <li>The logistic map generates a unique chaos value for each character</li>
            <li>The chaos value is used to shift the ASCII value (modulo 256)</li>
            <li>In double encryption mode, this process is repeated with a second seed</li>
        </ol>

        <h3>3. Security Features</h3>
        <ul>
            <li><strong>Sensitivity to Initial Conditions:</strong> Even a tiny change in the seed value produces completely different results</li>
            <li><strong>Deterministic Chaos:</strong> The system is deterministic yet unpredictable without the correct seed</li>
            <li><strong>Double Encryption Option:</strong> Adds an extra layer of security with a second chaotic sequence</li>
        </ul>

        <div id="sensitivityPlot" class="graph"></div>
        
        <h3>4. Bifurcation Diagram</h3>
        <p>The logistic map exhibits different behaviors based on the value of r. This interactive diagram shows how the system transitions from stable to chaotic behavior:</p>
        <div class="controls">
            <label>Points: <input type="range" id="pointsSlider" min="100" max="1000" value="500" /></label>
            <label>Iterations: <input type="range" id="iterationsSlider" min="50" max="200" value="100" /></label>
        </div>
        <div id="bifurcationPlot" class="graph"></div>
    </div>

    <script>
        // Generate bifurcation diagram data
        function generateBifurcationData(points, iterations) {
            const rValues = [];
            const xValues = [];
            
            for(let r = 2.5; r <= 4; r += (1.5/points)) {
                let x = 0.5;
                
                // Warm up
                for(let i = 0; i < 100; i++) {
                    x = r * x * (1 - x);
                }
                
                // Collect points
                for(let i = 0; i < iterations; i++) {
                    x = r * x * (1 - x);
                    rValues.push(r);
                    xValues.push(x);
                }
            }
            
            return [rValues, xValues];
        }

        // Initial bifurcation plot
        function updateBifurcationPlot() {
            const points = parseInt(document.getElementById('pointsSlider').value);
            const iterations = parseInt(document.getElementById('iterationsSlider').value);
            const [rValues, xValues] = generateBifurcationData(points, iterations);
            
            const trace = {
                x: rValues,
                y: xValues,
                mode: 'markers',
                type: 'scatter',
                marker: {
                    size: 1,
                    opacity: 0.5,
                    color: '#ff3366'
                }
            };

            const layout = {
                title: 'Bifurcation Diagram of Logistic Map',
                xaxis: { title: 'r parameter' },
                yaxis: { title: 'Stable points' },
                plot_bgcolor: '#333',
                paper_bgcolor: '#333',
                font: { color: '#fff' }
            };

            Plotly.newPlot('bifurcationPlot', [trace], layout);
        }

        // Add event listeners for sliders
        document.getElementById('pointsSlider').addEventListener('input', updateBifurcationPlot);
        document.getElementById('iterationsSlider').addEventListener('input', updateBifurcationPlot);

        // Initial plot
        updateBifurcationPlot();
        // Generate logistic map plot
        function generateLogisticData(x0, n) {
            let x = x0;
            const r = 3.99999;
            const xValues = [x];
            const yValues = [];

            for(let i = 0; i < n; i++) {
                const nextX = r * x * (1 - x);
                xValues.push(nextX);
                yValues.push(nextX);
                x = nextX;
            }

            return [xValues.slice(0, -1), yValues];
        }

        // Plot logistic map
        const [x1, y1] = generateLogisticData(0.2, 100);
        const trace1 = {
            x: x1,
            y: y1,
            mode: 'markers',
            name: 'x0 = 0.2',
            marker: { size: 3 }
        };

        const layout1 = {
            title: 'Logistic Map Behavior',
            xaxis: { title: 'x_n' },
            yaxis: { title: 'x_{n+1}' }
        };

        Plotly.newPlot('logisticPlot', [trace1], layout1);

        // Plot sensitivity demonstration
        const [x2, y2] = generateLogisticData(0.2, 50);
        const [x3, y3] = generateLogisticData(0.201, 50);

        const trace2 = {
            y: y2,
            mode: 'lines',
            name: 'x0 = 0.2'
        };

        const trace3 = {
            y: y3,
            mode: 'lines',
            name: 'x0 = 0.201'
        };

        const layout2 = {
            title: 'Sensitivity to Initial Conditions',
            xaxis: { title: 'Iteration' },
            yaxis: { title: 'Value' }
        };

        Plotly.newPlot('sensitivityPlot', [trace2, trace3], layout2);
    </script>
    <div style="text-align: center; margin-top: 20px;">
        <a href="/" class="button">Back to Home</a>
    </div>
</body>
</html>